version: "3.10"

services:
  membrane-live-db:
    container_name: postgres
    image: postgres
    environment:
      POSTGRES_USER: swm
      POSTGRES_PASSWORD: swm123
      PGDATA: /data/postgres
    volumes:
      - postgres:/data/postgres
    ports:
      - "5432:5432"
    restart: unless-stopped

  membrane-live:
    container_name: membrane_live
    build: .
    ports:
      - "4000:4000"
    depends_on:
      - membrane-live-db
    environment:
      PGUSER: swm
      PGPASSWORD: swm123
      PGDATABASE: membrane_live_dev
      PGHOST: membrane-live-db
      PGPORT: 5432

volumes:
  postgres:
